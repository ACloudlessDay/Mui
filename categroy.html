<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>分类</title>
		<script src="js/mui.min.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/categroy.css" />
		<link rel="stylesheet" type="text/css" href="css/iconfont.css" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
		<script type="text/javascript">
			var fs = document.documentElement.clientWidth / 750 * 100;
			document.documentElement.style.fontSize = fs + 'px';
		</script>
	</head>

	<body>
		<!--头部-->
		<header class="mui-bar mui-bar-nav">
			<a class=" mui-icon iconfont icon-richscan_icon "></a>
			<p class="inputwarp">
				<i class="mui-icon mui-icon-left-nav input-i"></i>
				<input class="input" type="" placeholder="米家空调伴侣" />
			</p>

			<a href="" class="icon-xiaoxi mui-icon iconfont"></a>
		</header>

		<!--主体-->
		<div class="mui-content">
			<ul class="goods-left">
				<li class="" data-index="0">手机</li>
				<li data-index="1">电视</li>
				<li data-index="2">电脑</li>
				<li data-index="3">家电</li>
				<li data-index="4">智能</li>
				<li data-index="5">路由</li>
			</ul>
			<div class="goods-right mui-scroll-wrapper">
				<!--	mui-scroll-wrapper  下拉滚动的class	-->
				<div class="mui-scroll">
					<div class="goods-menu iphone">
						<span>
		    				<img class="iphone-img" src="images/fl-2.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">手机</p></span>

						<div class="mui-row">
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
					<div class="goods-menu tv">
						<span>
		    				<img class="iphone-img" src="images/fl-3.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">电视</p></span>

						<div class="mui-row">

							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
					<div class="goods-menu computer">
						<span>
		    				<img class="iphone-img" src="images/fl-2.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">电脑</p></span>

						<div class="mui-row">

							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
					<div class="goods-menu home">
						<span>
		    				<img class="iphone-img" src="images/fl-1.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">家电</p></span>

						<div class="mui-row">

							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
					<div class="goods-menu">
						<span>
		    				<img class="iphone-img" src="images/fl-5.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">智能</p></span>

						<div class="mui-row">

							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
					<div class="goods-menu computer">
						<span>
		    				<img class="iphone-img" src="images/fl-3.webp"/>
		    			</span>
						<span class="iphone-span"><p class="info">路由</p></span>

						<div class="mui-row">

							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find1.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find2.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find3.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find4.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find5.jpg" alt="" />
								<p class="info">手机</p>
							</a>
							<a class="mui-col-sm-4 mui-col-xs-4 list">
								<img src="images/find/find6.jpg" alt="" />
								<p class="info">手机</p>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!--底部-->
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active" href="index.html">
				<span class="mui-icon icon-shouye iconfont"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			<a class="mui-tab-item" href="categroy.html">
				<span class="mui-icon iconfont icon-iconfind"></span>
				<span class="mui-tab-label">分类</span>
			</a>
			<a class="mui-tab-item" href="find.html">
				<span class="mui-icon iconfont icon-diqiu"></span>
				<span class="mui-tab-label">发现</span>
			</a>
			<a class="mui-tab-item" href="goods.html">
				<span class="mui-icon iconfont icon-gouwuche-copy"></span>
				<span class="mui-tab-label">购物车</span>
			</a>
			<a class="mui-tab-item" href="setting.html">
				<span class="mui-icon iconfont icon-wode"></span>
				<span class="mui-tab-label">我的</span>
			</a>
		</nav>

		<script type="text/javascript">
			//			
			//			1)	获取到所有的板块;    
			//				mui.ready(function(){
			//					var menu = document.q
			//				})
			//			2)	创建空数组;   var all = [];
			//			3)	循环遍历数组 , 并将每个板块距离页面顶部的距离  添加到数组里;
			//				for (var i = 0; i < Things.length; i++) {
			//					Things[i]
			//				}
			//			4)	给最右边这一大块 绑定滚动事件;
			//			5)	设置一个变量记录当前页面的滚动距离;
			//			6)	假设现在有一个变量记录的是 :   (	    页面滚动距离  - 第一个板块的top值	 )  是最小的差值  ---->   取绝对值;
			//			7)	假设现在有一个变量记录的是 :	相减后最小的差值的     (	索引	   )    先假设它是   0  ;
			//			8)	循环遍历数组里面的值,找到相减后  (	绝对值	)  最小的数;  
			//				if(	  页面滚动的距离    -	各个板块距离页面的距离  ---> 绝对值     <  假设的最小的差值	 ){
			//					最小的差值     =   页面滚动的距离    -	各个板块距离页面的距离  ---> 绝对值 ;
			//					最小的差值的索引   =  i ;
			//				}
			//				
			//			9)	if(document.querySelector(' .左边的外包class  .改变元素所需要的class ')){
			//				document.querySelector(' .左边的外包class  .改变元素所需要的class ').classList.remove('改变元素所需要的class');
			//			}
			//				document.querySelectorAll(' .左边的外包class  .改变的元素 ')[差值最小的索引].classList.add('改变元素所需要的class');

			//			10)	给左边的外包下的     需被点击触发事件的    元素绑定点击事件
			//				mui('.外包class').on('tap','元素',function(){
			//					var 索引  = this.getAttribute('前面需被点击触发事件元素的   自定义属性   因为它有一个人为设置的索引');
			//					document.querySelector('.右边元素的外包class').srollTop = 数组[索引]
			//
			//					if( document.querySelector('.左边外包  .需触发事件元素') ){
			//						document.querySelector('.左边外包  .需触发事件元素').classList.remove('改变元素所需的class');
			//					}
			//					this.classList.add('改变元素所需的class'); ---->   这里为什么直接写  this ?    因为你点谁谁就调用这个函数  谁就是 this
			//				})

			mui.ready(function() {
				var menu = document.querySelectorAll(".goods-menu"); //	获取各大板块
				//				console.log(menu);
				//				var scroll;

				var all = []; //	创建一个空数组

				for(var i = 0; i < menu.length; i++) {
					all.push(menu[i].offsetTop);
				}
				//				console.log(all);

				document.querySelector(".goods-right").addEventListener("scroll", doSomething)
				//				给右边的板块	绑定滚动事件

				function doSomething() {
					//					console.info( Date.now() );

					var scroll = this.scrollTop;

					//					console.info( scroll );

					var minDist = Math.abs(scroll - all[0]);

					//					console.log( minDist );

					var minIndex = 0;

					for(var i = 1; i < all.length; i++) {
						if(Math.abs(scroll - all[i]) < minDist) {
							minDist = Math.abs(scroll - all[i]);
							minIndex = i;
						}
						//						console.log(scroll,minDist,minIndex);
					}

					if(document.querySelector('.goods-left .on')) {
						document.querySelector('.goods-left .on').classList.remove('on');
					}
					document.querySelectorAll('.goods-left li')[minIndex].classList.add('on');

				}

				mui('.goods-left').on('tap', 'li', function() {
					var index = this.getAttribute('data-index');
					//					console.log(index);
					document.querySelector('.goods-right').scrollTop = all[index];

					if(document.querySelector('.goods-left .on')) {
						document.querySelector('.goods-left .on').classList.remove('on');
					}
					this.classList.add('on');
				});

			});

//			mui.init({
//				pullRefresh: {
//					container: '.goods-right',
//					down: {
//						callback: pulldownRefresh  // 下拉
//					},
//					up: {
//						contentrefresh: '正在加载...',//	上拉
//						callback: pullupRefresh
//					}
//				}
//			});
			/**
			 * 下拉刷新具体业务实现
			 */
			
			
//			解除底部导航的默认阻止点击
			mui.ready(function(){
				mui(".mui-bar-tab").on("tap",".mui-tab-item",function(){
					var links = this.getAttribute("href");
//					console.info( this,hr);
					window.location.href = links;
				})
			})
		</script>
	</body>

</html>